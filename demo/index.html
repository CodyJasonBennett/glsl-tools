<style>
  * {
    margin: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
  }
</style>
<script type="module">
  const canvas = document.body.appendChild(document.createElement('canvas'))
  const gl = canvas.getContext('webgl2')
  const vertex = gl.createShader(gl.VERTEX_SHADER)
  gl.shaderSource(
    vertex,
    /* glsl */ `#version 300 es
      out vec2 vUv;

      const vec2 position[3] = vec2[](vec2(-1), vec2(3, -1), vec2(-1, 3));
      const vec2 uv[3] = vec2[](vec2(0), vec2(2, 0), vec2(0, 2));

      void main() {
        gl_Position = vec4(position[gl_VertexID], 0, 1);
        vUv = uv[gl_VertexID];
      }
    `,
  )
  gl.compileShader(vertex)
  const fragment = gl.createShader(gl.FRAGMENT_SHADER)
  gl.shaderSource(
    fragment,
    /* glsl */ `#version 300 es
      precision lowp float;

      uniform float time;
      in vec2 vUv;
      out vec4 color;

      void main() {
        color = vec4(.3, .2, .5, 1);
        color.rgb += .5 + .3 * cos(vUv.xyx + time);
      }
    `,
  )
  gl.compileShader(fragment)
  const program = gl.createProgram()
  gl.attachShader(program, vertex)
  gl.attachShader(program, fragment)
  gl.linkProgram(program)
  gl.useProgram(program)
  const animate = (time) => {
    requestAnimationFrame(animate)
    gl.uniform1f(gl.getUniformLocation(program, 'time'), time / 1000)
    gl.drawArrays(gl.TRIANGLES, 0, 3)
  }
  animate()
</script>
